<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">

	<title>Repository - Cora Framework Documentation</title>

        <link href="../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../../css/highlight.css">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link href="../../../../extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../../..">Cora Framework Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../../../..">About</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../../../setup/install/">Installation</a>
</li>

                    
                        
<li >
    <a href="../../../../setup/configuration/">Configuration</a>
</li>

                    
                        
<li >
    <a href="../../../../setup/advanced/">Advanced Configuration</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorals <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../../../tutorials/intro/">Intro to Cora</a>
</li>

                    
                        
<li >
    <a href="../../../../tutorials/composer/">Using Composer</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Core Concepts</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../v2/mvc/overview/">MVC Pattern</a>
</li>

        
            
<li >
    <a href="../../../v2/routing/overview/">Routing</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/overview/">AmBlend ORM</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/overview/">Database Class</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">MVC Pattern</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../v2/mvc/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../v2/mvc/models/">Models</a>
</li>

        
            
<li >
    <a href="../../../v2/mvc/views/">Views</a>
</li>

        
            
<li >
    <a href="../../../v2/mvc/controllers/">Controllers</a>
</li>

        
            
<li >
    <a href="../../../v2/mvc/libraries/">Libraries</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Routing</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../v2/routing/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../v2/routing/custom_routes/">Custom Routes</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">AmBlend ORM</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../v2/amblend/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/implementation/">Implementation</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/repository/">Repository</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/model/">Model</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/gateway/">Gateway</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/factory/">Factory</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/lifecycle/">Lifecycle Callbacks</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/database_gen/">Automated DB Creation</a>
</li>

        
            
<li >
    <a href="../../../v2/amblend/opt_locking/">Optimistic Locking</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Database Class</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../v2/databaseclass/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/methods_utility/">Utility Methods</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/methods_select/">SELECT Methods</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/methods_update/">UPDATE Methods</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/methods_insert/">INSERT Methods</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/methods_delete/">DELETE Methods</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/methods_create/">CREATE Methods</a>
</li>

        
            
<li >
    <a href="../../../v2/databaseclass/databaseresult/">DatabaseResult Class</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Events</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../v2/events/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../v2/events/eventmanager/">Event Manager</a>
</li>

        
            
<li >
    <a href="../../../v2/events/eventmapping/">Event Mapping</a>
</li>

        
            
<li >
    <a href="../../../v2/events/event/">Event</a>
</li>

        
            
<li >
    <a href="../../../v2/events/listener/">Listener</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../../v2/validationclass/overview/">Validate Class</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Legacy Versions</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cora Version 1</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Core Concepts</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../mvc/overview/">MVC Pattern</a>
</li>

        
            
<li >
    <a href="../../routing/overview/">Routing</a>
</li>

        
            
<li >
    <a href="../overview/">AmBlend ORM</a>
</li>

        
            
<li >
    <a href="../../databaseclass/overview/">Database Class</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">MVC Pattern</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../mvc/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../mvc/models/">Models</a>
</li>

        
            
<li >
    <a href="../../mvc/views/">Views</a>
</li>

        
            
<li >
    <a href="../../mvc/controllers/">Controllers</a>
</li>

        
            
<li >
    <a href="../../mvc/libraries/">Libraries</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../../routing/overview/">Routing</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">AmBlend ORM</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../overview/">Overview</a>
</li>

        
            
<li >
    <a href="../implementation/">Implementation</a>
</li>

        
            
<li class="active">
    <a href="./">Repository</a>
</li>

        
            
<li >
    <a href="../model/">Model</a>
</li>

        
            
<li >
    <a href="../gateway/">Gateway</a>
</li>

        
            
<li >
    <a href="../factory/">Factory</a>
</li>

        
            
<li >
    <a href="../lifecycle/">Lifecycle Callbacks</a>
</li>

        
            
<li >
    <a href="../database_gen/">Automated DB Creation</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Database Class</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../databaseclass/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_utility/">Utility Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_select/">SELECT Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_update/">UPDATE Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_insert/">INSERT Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_delete/">DELETE Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_create/">CREATE Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/databaseresult/">DatabaseResult Class</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Events</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../events/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../events/eventmanager/">Event Manager</a>
</li>

        
            
<li >
    <a href="../../events/eventmapping/">Event Mapping</a>
</li>

        
            
<li >
    <a href="../../events/event/">Event</a>
</li>

        
            
<li >
    <a href="../../events/listener/">Listener</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../../validationclass/overview/">Validate Class</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CS Topics <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../../../computerscience/computability/">Computability</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../implementation/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../model/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#repository-class">Repository Class</a></li>
        
    
        <li class="main "><a href="#creating-a-repository">Creating a Repository</a></li>
        
            <li><a href="#using-repositoryfactory">Using RepositoryFactory</a></li>
        
            <li><a href="#using-custom-setup">Using Custom Setup</a></li>
        
            <li><a href="#using-model-method">Using Model Method</a></li>
        
    
        <li class="main "><a href="#using-a-repository">Using a Repository</a></li>
        
            <li><a href="#find-method">find() Method</a></li>
        
            <li><a href="#findone-method">findOne() Method</a></li>
        
            <li><a href="#findall-method">findAll() Method</a></li>
        
            <li><a href="#findby-method">findBy() Method</a></li>
        
            <li><a href="#delete-method">delete() Method</a></li>
        
            <li><a href="#save-method">save() Method</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="repository-class">Repository Class</h1>
<p>The purpose of the Repository is to separate the logic that retrieves data from
the persistence layer from the models themselves and the business logic that
acts on those models. The Repository acts as a sort of controller that utilizes
a Gateway for direct access to data and a Factory for creating objects.</p>
<h1 id="creating-a-repository">Creating a Repository</h1>
<p>There's a few different ways to get a Repository depending on the situation. The
most general purpose and easiest solution is usually to utilize the RepositoryFactory
class. However, for situations where you need to utilize a custom Gateway or Factory,
creating a Repository without using the factory may be desired. Finally, if you
already have an instance of a model, you can ask a model to give you a repository
matching its type.</p>
<h2 id="using-repositoryfactory">Using RepositoryFactory</h2>
<p>For simple class namespaces, it's easiest to just type the name in like so:</p>
<pre><code class="PHP">class MyController extends \MyApp {
    public function demo()
    {
        $repo = \Cora\RepositoryFactory::make('User');
        $user = $repo-&gt;find($id);
    }
}
</code></pre>

<p>For more advanced namespaces, you can take advantage of Use statements by utilizing
the "class" keyword:</p>
<pre><code class="php">use \System\Blog\Bug\Task\Note;
class MyController extends \MyApp {
    public function demo()
    {
        $repo = \Cora\RepositoryFactory::make(Note::class);
        $user = $repo-&gt;find($id);

        // OR you can still do

        $repo = \Cora\RepositoryFactory::make('\\System\\Blog\\Bug\\Task\\Note');
        $user = $repo-&gt;find($id);
    }
}
</code></pre>

<h3 id="repositoryfactory-options">RepositoryFactory Options</h3>
<p>While we're on the topic of using the RepositoryFactory, now is a good time to look
at its make() method definition and the options it gives you.</p>
<pre><code>make($class, $idField = false, $table = false, $freshAdaptor = false, $db = false)
</code></pre>

<ul>
<li>The $class parameter is the object type you'll be using the repository for.</li>
<li>The optional $idField parameter is for setting the unique ID field which will be
used to fetch objects from a database. You'll most likely want to set this if your
ID column is something other than 'id'.</li>
<li>The optional $table parameter is for overriding the defaults as defined in a model. If
this parameter is defined, it will be passed to the Gateway as the table/collection
to fetch objects from.</li>
<li>The optional $freshAdaptor is a setting you'll most likely not ever need to use. See my explanation
after this list for more details.</li>
<li>The optional $db let's you pass in a custom Cora database connection for the Gateway to use.
This can be used to force the Repository and Dynamic Loading to use a connection to
a Test database for testing purposes.</li>
</ul>
<p><strong>Explanation of $freshAdaptor:</strong></p>
<div class="alert alert-warning">
    WARNING: Please don't confuse yourself by reading this section unless you are
    an advanced developer interested in writing your own Gateway implementations.
</div>

<p>AmBlend is
built using Cora's Database class, and since most apps probably only use a single
database, part of the database setup process is setting a "default connection".
When fetching models, if no particular connection is specified in the model definition, AmBlend
will default to using the default connection. In order to make this typical use case more
efficient, the Database class stores an instance of the default DB as a static data member.
When a database operation involving the default database is performed, this statically stored
default will be used rather than creating a new instance each time.
In most cases this is great! However, because Cora's Database
class can only handle building 1 query at a time, if you end up in a situation where
in the middle of building a query, you need to pause and perform another query on
the default connection, this can cause problems. In this scenario, what you need is
a fresh version of the adaptor and not the statically stored one. Setting $freshAdaptor
to true gives you a new database class.</p>
<p>I realize that explanation is a little hard to follow, but the reason for the $freshAdaptor
parameter's existence has to do with the inner optimization workings of Cora, and
is inherently complicated for that reason. The good news is that unless you start building
your own custom gateway classes, I can't really think of a reason you'd need to use or
understand it.</p>
<p>The backstory on this feature is that Cora's Gateway walks through a loop of a model's
attributes and builds up the query to save the model to the database. However, when
a related object is encountered, it recursively calls the Save() method on that related
object at the time it encounters it. Because the default adaptor was already being used to build
up a query, that recursive call to the Save() method on the related object was causing conflicts if the
related object also used the default adaptor (due to the one query at a time restriction
on a Cora Database class and the default database being stored statically).</p>
<h2 id="using-custom-setup">Using Custom Setup</h2>
<p>For situations where you want to swap out components of the repository system
with your own custom classes, you'll need to bypass the RepositoryFactory and just
do the setup yourself. The general format is as follows:</p>
<pre><code class="PHP">$db = \Cora\Database::getDb('name_of_db_connection_to_use');
$class = 'User';
$factory = new Factory($class, $db);
$gateway = new Gateway($db);
$repo    = new Repository($gateway, $factory);
</code></pre>

<h2 id="using-model-method">Using Model Method</h2>
<p>If you're in a situation where you created an instance of a Cora Model class,
and now you need a repository for it to persist it or whatever, you can take advantage
of Cora Model's knowledge on how to create repositories for themselves:</p>
<pre><code class="PHP">$user = new \User('Josiah', 'SuperAdmin');
$user-&gt;location = new Location('JoesHouse', 'Portland');
$user-&gt;job      = new Job('Librarian', 'Keeper of knowledge!');
$repo = $user-&gt;getRepository();
$repo-&gt;save($user);
</code></pre>

<h1 id="using-a-repository">Using a Repository</h1>
<h2 id="find-method">find() Method</h2>
<p><strong>Purpose:</strong> <br />
The find() method is for grabbing a single object from a database based on the
object's unique ID.</p>
<p><strong>Format:</strong></p>
<pre><code class="php">find(id)
</code></pre>

<p><strong>Examples:</strong>  </p>
<pre><code>// Create Repository
$repo = \Cora\RepositoryFactory::make('User');

// Grab a user Object
$user = $repo-&gt;find($id);
</code></pre>

<h2 id="findone-method">findOne() Method</h2>
<p><strong>Purpose:</strong> <br />
The findOne() method is for grabbing a single object from a database based on
the passed in query parameters.</p>
<p><strong>Format:</strong></p>
<pre><code class="php">findOne(coraDbQuery)
</code></pre>

<p><strong>Examples:</strong>  </p>
<pre><code>// Create Repository
$repo = \Cora\RepositoryFactory::make('User');

// Grab an instance of database adaptor for this model.
$db = $repo-&gt;getDb();

// Define some db query parameters.
$db-&gt;where('name', 'testUser');

// Grab a user Object matching query.
$user = $repo-&gt;findOne($db);
</code></pre>

<h2 id="findall-method">findAll() Method</h2>
<p><strong>Purpose:</strong> <br />
The findAll() method is for grabbing all objects from a database collection.
The results can be limited by optionally passing along query parameters.</p>
<p><strong>Format:</strong></p>
<pre><code class="php">findAll([coraDbQuery])
</code></pre>

<p><strong>Examples:</strong>  </p>
<pre><code>// Create Repository
$repo = \Cora\RepositoryFactory::make('User');

// Fetch ALL users.
$allUsers = $repo-&gt;findAll();

// Grab an instance of database adaptor for this model.
$db = $repo-&gt;getDb();

// Define some db query parameters.
$db-&gt;where('type', 'Admin');

// Grab a subset of users. In this case all users who are Admins.
$admins = $repo-&gt;findAll($db);
</code></pre>

<h2 id="findby-method">findBy() Method</h2>
<p><strong>Purpose:</strong> <br />
The findBy() method is for grabbing a set of objects based on a simple restriction.
This has the same basic functionality as findAll(), but is simpler to use with
the tradeoff of being less flexible.</p>
<p><strong>Format:</strong></p>
<pre><code class="php">// options = array(['order_by' =&gt; 'desc|asc'] [, 'limit' =&gt; number [, 'offset' =&gt; number]])
findBy(property, value [, options])
</code></pre>

<p>Because the "options" is kinda hard to read above let me just verbally describe it.
You can pass in an associative array with up to 3 keys, those being "order_by",
"limit", and "offset". Order_by should be either "desc" or "asc", and limit and offset
should be numbers. Offset doesn't do anything unless you also pass in a Limit.</p>
<p><strong>Examples:</strong>  </p>
<pre><code>// Create Repository
$repo = \Cora\RepositoryFactory::make('User');

// Grab users who are Admins.
$admins = $repo-&gt;findBy('type', 'Admin');

// Grab users who are Moderators, but only return the first 10.
$mods = $repo-&gt;findBy('type', 'Moderator', ['limit' =&gt; 10]);

// Grab the next 10 Moderators
$moreMods = $repo-&gt;findBy('type', 'Moderator', ['limit' =&gt; 10, 'offset' =&gt; 10]);
</code></pre>

<h2 id="delete-method">delete() Method</h2>
<p><strong>Purpose:</strong> <br />
The delete() method is for deleting a single object from a database based on the
object's unique ID. It will call the object's own "delete" method for cleanup
before removing the record from the database.</p>
<p><strong>Format:</strong></p>
<pre><code class="php">delete(id)
</code></pre>

<p><strong>Examples:</strong>  </p>
<pre><code>// Create Repository
$repo = \Cora\RepositoryFactory::make('User');

// Delete a user.
$repo-&gt;delete($id);
</code></pre>

<h2 id="save-method">save() Method</h2>
<p><strong>Purpose:</strong> <br />
The save() method is for persisting one or more objects. Usually this means saving
records in a database. If the object(s) already exists in the database, then
any changes will be updated. If the object(s) does not exist, then it will be
inserted.</p>
<p><strong>Format:</strong></p>
<pre><code class="php">save(Cora_Model | ResultSet_of_Cora_Models [, table] [, id_name])
</code></pre>

<p>The Table and Id_name optional parameters are for overriding default model behavior
if necessary. The refer to the table/collection the object should be saved to,
and the unique identifying column for the object. You probably don't need to use
these! Check out the RepositoryFactory options near the top of this page for a
way you can set these options for all operations on a Repository.</p>
<p><strong>Examples:</strong>  </p>
<pre><code class="php">// Create Repository
$repo = \Cora\RepositoryFactory::make('User');

/////////////////////////////////////////////
// Modify a single existing user.
/////////////////////////////////////////////

// Grab a user Object
$user = $repo-&gt;find($id);

// Change something
$user-&gt;email = 'BobsNewEmail@fakeEmail.com';

// Save the changes.
$repo-&gt;save($user);



////////////////////////////////////////////
// Save a completely new user.
////////////////////////////////////////////

// Create a user object.
$user = new User('Bob', 'Bob@fakeEmail.com');

// Save the user to the database.
$repo-&gt;save($user);



////////////////////////////////////////////
// Modify a collection of users.
// We'll pretend we're crediting our 'premium'
// users some amount to their account.
////////////////////////////////////////////

// Grab a collection of users.
$users = $repo-&gt;findBy('type', 'Premium');

// Change something
foreach ($users as $user) {
    $user-&gt;accountCredit += 100;
}

// Save the changes.
$repo-&gt;save($users);



////////////////////////////////////////////
// Assign a collection of objects to a user.
////////////////////////////////////////////

// Grab a user Object
$user = $repo-&gt;find($id);

// Assign a collection of articles to the user
$user-&gt;articles =   new \Cora\ResultSet([
                        new Article('How to Fly a Plane'),
                        new Article('How to Make Money')
                    ]);

// Save the changes.
$repo-&gt;save($user);



////////////////////////////////////////////
// Add to an existing collection of objects
////////////////////////////////////////////

// Grab a user Object
$user = $repo-&gt;find($id);

// Add a new article to the collection of articles this user has.
$user-&gt;articles-&gt;add(new Article('How to Make Money Vol2'));

// Save the changes.
$repo-&gt;save($user);
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../../..';</script>
        <script data-main="../../../../mkdocs/js/search.js" src="../../../../mkdocs/js/require.js"></script>
        <script src="../../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>