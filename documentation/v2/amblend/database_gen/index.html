<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">

	<title>Automated DB Creation - Cora Framework Documentation</title>

        <link href="../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../../css/highlight.css">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link href="../../../../extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../../..">Cora Framework Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../../../..">About</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../../../setup/install/">Installation</a>
</li>

                    
                        
<li >
    <a href="../../../../setup/configuration/">Configuration</a>
</li>

                    
                        
<li >
    <a href="../../../../setup/advanced/">Advanced Configuration</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorals <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../../../tutorials/intro/">Intro to Cora</a>
</li>

                    
                        
<li >
    <a href="../../../../tutorials/composer/">Using Composer</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">AmBlend ORM</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../overview/">Overview</a>
</li>

        
            
<li >
    <a href="../implementation/">Implementation</a>
</li>

        
            
<li >
    <a href="../repository/">Repository</a>
</li>

        
            
<li >
    <a href="../model/">Model</a>
</li>

        
            
<li >
    <a href="../gateway/">Gateway</a>
</li>

        
            
<li >
    <a href="../factory/">Factory</a>
</li>

        
            
<li >
    <a href="../lifecycle/">Lifecycle Callbacks</a>
</li>

        
            
<li class="active">
    <a href="./">Automated DB Creation</a>
</li>

        
            
<li >
    <a href="../opt_locking/">Optimistic Locking</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../collections/">Collection Class</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Database Class</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../databaseclass/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_utility/">Utility Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_select/">SELECT Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_update/">UPDATE Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_insert/">INSERT Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_delete/">DELETE Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/methods_create/">CREATE Methods</a>
</li>

        
            
<li >
    <a href="../../databaseclass/databaseresult/">DatabaseResult Class</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../dependency-injection/overview/">Dependency Injection</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Events</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../events/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../events/eventmanager/">Event Manager</a>
</li>

        
            
<li >
    <a href="../../events/eventmapping/">Event Mapping</a>
</li>

        
            
<li >
    <a href="../../events/event/">Event</a>
</li>

        
            
<li >
    <a href="../../events/listener/">Listener</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">MVC Pattern</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../mvc/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../mvc/models/">Models</a>
</li>

        
            
<li >
    <a href="../../mvc/views/">Views</a>
</li>

        
            
<li >
    <a href="../../mvc/controllers/">Controllers</a>
</li>

        
            
<li >
    <a href="../../mvc/libraries/">Libraries</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Routing</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../routing/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../routing/custom_routes/">Custom Routes</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../validationclass/overview/">Validate Class</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CS Topics <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../../../computerscience/computability/">Computability</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../lifecycle/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../opt_locking/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#database-generation">Database Generation</a></li>
        
            <li><a href="#create-your-database">Create Your Database:</a></li>
        
            <li><a href="#empty-a-database">Empty a Database</a></li>
        
            <li><a href="#automatic-data-loading">Automatic Data Loading</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="database-generation">Database Generation</h1>
<p>Once you have valid AmBlend models defined, you can automatically generate a database
for your project using AmBlend's database generation tool.</p>
<div class="alert alert-warning">
Please note that this tool is a part of the Cora demo project and not in the
Framework core, so if you went the non-typical route and bypassed using the demo
project as a base to build on, you'll need to grab the Amblend.php file out of the
demo project's root.
</div>

<h2 id="create-your-database">Create Your Database:</h2>
<p>In order to take advantage of automated database creation, you need to make sure
you've setup your database configuration. If you haven't done that yet,
<a href="../../../../setup/configuration/#step-6-configure-your-database">Click Here</a> to view
instructions on doing so. The other thing you'll need (as of me writing this),
is command line access. In the future, an in-browser
visual interface to the database creation tool may be added, but for now it's just
a command line tool.</p>
<div class="alert alert-info">

<div class="bold">If on a shared hosting environment:</div>  

Because the database creation feature is a command line tool...
what this means for people who will be hosting their app in
a shared hosting environment without command line access is that you'll need to
generate your database on your local machine and then use a tool (such as PhpMyAdmin)
to export your generated database into an SQL file you can upload.
</div>

<p><strong>To automatically generate a database based on your model definitions you need
to do the following:</strong></p>
<ol>
<li>Open a Terminal.<ul>
<li>If on a Mac, open your Applications, click the Utilities folder, and then
select the "Terminal" application.</li>
<li>If on a PC, hit your Windows Key + R to open the "Run" window, then type
in "cmd" and hit enter.</li>
<li>If on Linux you don't need me to tell you how to do this, but since I can't
help myself I'll mention that Ubuntu and Mint both map the terminal to
Ctrl+Alt+T.</li>
</ul>
</li>
<li>Navigate to your project's directory.<ul>
<li>If you are XAMPP, MAMP, etc, that will likely be wherever you installed
that and then in the "htdocs" folder within.</li>
</ul>
</li>
<li>Once at the root of your project, type "php Amblend.php dbBuild" to have
AmBlend build your database for you.</li>
</ol>
<pre><code class="php">php Amblend.php dbBuild
</code></pre>

<div class="alert alert-warning">
    If you get an error about PHP not being a recognized command, that means
    PHP is not a part of your operating system's PATH. Google "add php to path"
    or something similar if you aren't sure how to do this.
</div>

<p>If all went well, you should see a flurry of output to the console and your database
should be ready to go!</p>
<p>Of course, if you want to read through the documentation
in the Models page to fully understand how the mappings work for the purpose of
setting your database(s) up manually, you can, although that takes more expertise
and effort.</p>
<h2 id="empty-a-database">Empty a Database</h2>
<p>So chances are you'll be making changes to your models throughout development and
will need to rebuild your database each time. In order to make use of the automated
creation tool again, you'll need to empty out any database(s) you're using by deleting
all the existing tables. To speed up this process, the database generation tool also
includes a command to delete all the existing tables.</p>
<div class="alert alert-danger">
<div class="bold">This DELETES any data you have in the database. NEVER EVER use
this on a live app. Use this only during development and know you will have to
re-insert your test data afterwards.</div>  
</div>

<p>To make this happen, you need to use the "dbEmpty" command and then specify a
database connection from your project's database config file:</p>
<pre><code class="php">php Amblend.php dbEmpty NameOfConnection
</code></pre>

<h2 id="automatic-data-loading">Automatic Data Loading</h2>
<p>By default, when you run the "dbBuild" command, AmBlend will look for a file named 
"data.php" in the following directory:</p>
<pre><code>/includes/data.php
</code></pre>

<p>If it finds a matching file, it will include it after it does the build. The expected
use case is "data.php" uses Cora's database class to run some Insert commands to load
data into the database for you. However, the file can do whatever you want, and you can
use whatever tools you want within it (obviously). It's just a way for you to execute 
some code to populate your database with test data during development.</p>
<p>If you want to include a file other than "data.php", you can specify a different file
after the build command like so:</p>
<pre><code>php Amblend.php dbBuild myfile.php
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../../..';</script>
        <script data-main="../../../../mkdocs/js/search.js" src="../../../../mkdocs/js/require.js"></script>
        <script src="../../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>